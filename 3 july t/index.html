<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Typing Practice Tutor</title>
    <style>
        /* Reset and base styles */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            min-height: 100vh;
            margin: 0;
            background: rgb(0, 255, 188);
            background: linear-gradient(0deg, rgba(0, 255, 188, 1) 0%, rgba(0, 22, 255, 1) 50%, rgba(162, 0, 255, 1) 100%);
            color: #fff;
        }

        .container {
            width: 100%;
            max-width: 800px;
            margin: auto;
            background: rgba(0, 0, 0, 0.603);
            border-radius: 10px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        header {
            text-align: center;
            margin-bottom: 20px;
        }

        header h1 {
            font-size: 2rem;
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 600px;
            padding: 10px; /* Added padding */
        }

        .text-container {
            margin-bottom: 10px;
            padding: 15px;
            border-radius: 10px;
            background: #ffffff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 100%;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            color: #000000;
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .typing-area {
            width: 100%;
            height: 70px;
            margin-bottom: 10px;
            padding: 8px;
            font-size: 0.9rem;
            background: #ffffff;
            color: #000000;
            border: 1px solid #444;
            border-radius: 10px;
            resize: none;
            transition: border-color 0.3s;
        }

        .typing-area:focus {
            border-color: #2575fc;
        }

        .stats {
            display: flex;
            flex-wrap: wrap; /* Added flex-wrap for responsiveness */
            justify-content: space-around;
            width: 100%;
            margin-bottom: 20px;
        }

        .stats p {
            font-size: 1rem;
            flex-basis: 50%; /* Adjusted flex-basis for responsiveness */
            text-align: center; /* Centered text for smaller screens */
            margin-bottom: 5px; /* Added margin bottom for spacing */
        }

        .start-button {
            padding: 10px 20px;
            font-size: 1rem;
            cursor: pointer;
            border: none;
            border-radius: 10px;
            background-color: #ffffffcc;
            color: #0066ff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            transition: background-color 0.3s;
        }

        .start-button:hover {
            background-color: #0066ff;
            color: #ffffff;
        }

        .completion-message {
            background-color: rgba(0, 94, 255, 0.658);
            color: #000000;
            padding: 15px;
            margin-top: 20px;
            border-radius: 10px;
            text-align: center;
            display: none;
        }

        .history {
            width: 90%;
            margin-top: 20px;
            margin-bottom: 20px;
            padding: 20px;
            background: #ffffff;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }

        .history h2 {
            font-size: 1.5rem;
            color: #0000008a;
            margin-bottom: 10px;
        }

        .history-list {
            list-style-type: none;
            padding: 0;
        }

        .history li {
            background: #444;
            padding: 10px;
            margin-bottom: 5px;
            border-radius: 5px;
            color: #fff;
            font-size: 0.9rem;
        }

        .incorrect {
            color: #ff0000;
            text-shadow: black;
            text-decoration-line: underline;
        }

        .correct {
            color: #00ff37;
            text-shadow: black;
        }

       

        @media (max-width: 600px) {
            main {
                padding: 5px; /* Adjusted padding */
            }

            .text-container {
                padding: 10px; /* Adjusted padding */
                min-height: 60px; /* Adjusted height */
                font-size: 0.9rem; /* Adjusted font size */
            }

            .typing-area {
                height: 60px; /* Adjusted height */
                padding: 8px; /* Adjusted padding */
                font-size: 0.8rem; /* Adjusted font size */
            }

            .stats p {
                flex-basis: 100%; /* Full width on smaller screens */
                margin-bottom: 10px; /* Increased margin bottom */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Typing Practice Tutor</h1>
        </header>
        <main>
            <section id="text-container" class="text-container">
                <p id="text-to-type"></p>
            </section>
            <textarea id="typing-area" class="typing-area" placeholder="Start typing here..."></textarea>
            <div class="stats">
                <p>Time: <span id="timer">0</span>s</p>
                <p>Errors: <span id="errors">0</span></p>
                <p>WPM: <span id="wpm">0</span></p>
                <p>Backspace Count: <span id="backspace-count">0</span></p>
            </div>
            <input type="number" id="practice-time" class="typing-area" placeholder="Practice time in seconds" min="1" required>
            <button id="start-button" class="start-button">Start Practice</button>
            <div id="completion-message" class="completion-message"></div>
            <div id="error-message" class="message" style="display: none;"></div>
        </main>
        <aside class="history">
            <h2>History</h2>
            <ul id="history-list" class="history-list"></ul>
        </aside>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const texts = [
            "The quick brown fox jumps over the lazy dog.",
            "A journey of a thousand miles begins with a single step.",
            "To be or not to be, that is the question.",
            "All that glitters is not gold.",
            "The only thing we have to fear is fear itself."
        ];

        const elements = {
            textToType: document.getElementById('text-to-type'),
            typingArea: document.getElementById('typing-area'),
            timer: document.getElementById('timer'),
            errors: document.getElementById('errors'),
            wpm: document.getElementById('wpm'),
            backspaceCount: document.getElementById('backspace-count'),
            startButton: document.getElementById('start-button'),
            historyList: document.getElementById('history-list'),
            completionMessage: document.getElementById('completion-message'),
            errorMessage: document.getElementById('error-message'),
            practiceTimeInput: document.getElementById('practice-time')
        };

        let state = {
            timer: 0,
            errors: 0,
            backspaceCount: 0,
            interval: null,
            startTime: null,
            currentText: '',
            practiceTime: 0,
            history: []
        };

        const startPractice = () => {
            // Validate practice time input
            const practiceTimeInput = parseInt(elements.practiceTimeInput.value);
            if (isNaN(practiceTimeInput) || practiceTimeInput <= 0) {
                elements.errorMessage.textContent = 'Please enter a valid practice time (greater than 0 seconds).';
                elements.errorMessage.style.display = 'block';
                return;
            }

            // Reset error message display
            elements.errorMessage.style.display = 'none';

            state.currentText = getRandomText();
            elements.textToType.innerHTML = state.currentText.split('').map(char => 
                `<span>${char === ' ' ? '&nbsp;' : char}</span>`
            ).join('');
            elements.typingArea.value = '';
            elements.typingArea.disabled = false;
            elements.typingArea.focus();
            state.timer = 0;
            state.errors = 0;
            state.backspaceCount = 0; // Reset backspace count
            state.startTime = Date.now(); // Use Date.now() for accurate timing
            state.practiceTime = practiceTimeInput;
            updateStats();
            clearInterval(state.interval);
            state.interval = setInterval(updateTimer, 1000);
            elements.completionMessage.style.display = 'none';
        };

        const updateTyping = (event) => {
            const typedText = elements.typingArea.value;
            const textSpans = elements.textToType.querySelectorAll('span');

            state.errors = 0;

            if (event.inputType === 'deleteContentBackward') {
                state.backspaceCount++;
            }

            for (let i = 0; i < state.currentText.length; i++) {
                const typedChar = typedText[i];
                const correctChar = state.currentText[i];
                const span = textSpans[i];

                if (typedChar === undefined) {
                    span.classList.remove('correct', 'incorrect');
                } else if (typedChar === correctChar || (typedChar === ' ' && correctChar === ' ')) {
                    span.classList.add('correct');
                    span.classList.remove('incorrect');
                } else {
                    if (typedChar === ' ') {
                        span.classList.add('incorrect');
                    } else {
                        span.classList.remove('correct', 'incorrect');
                    }
                    state.errors++;
                }
            }

            updateStats();

            if (typedText.length === state.currentText.length) {
                finishPractice();
            }
        };

        const updateTimer = () => {
            state.timer++;
            updateStats();

            if (state.timer >= state.practiceTime) {
                finishPractice();
            }
        };

        const updateStats = () => {
            elements.timer.textContent = state.timer;
            elements.errors.textContent = state.errors;
            elements.wpm.textContent = calculateWPM(elements.typingArea.value, state.timer);
            elements.backspaceCount.textContent = state.backspaceCount;
        };

        const calculateWPM = (text, timeInSeconds) => {
            const wordsTyped = text.trim().split(/\s+/).length;
            const minutes = timeInSeconds / 60;
            return Math.round(wordsTyped / minutes) || 0;
        };

        const finishPractice = () => {
            clearInterval(state.interval);
            elements.typingArea.disabled = true;
            const endTime = Date.now();
            const timeTaken = (endTime - state.startTime) / 1000;
            const wpm = calculateWPM(elements.typingArea.value, timeTaken);
            addToHistory(timeTaken, state.errors, wpm);
            displayCompletionMessage(`Practice complete! Time: ${timeTaken.toFixed(2)}s, Errors: ${state.errors}, WPM: ${wpm}`);
        };

        const addToHistory = (time, errors, wpm) => {
            state.history.push({ time: time.toFixed(2), errors, wpm });
            const historyItem = document.createElement('li');
            historyItem.textContent = `Time: ${time.toFixed(2)}s, Errors: ${errors}, WPM: ${wpm}`;
            elements.historyList.appendChild(historyItem);
        };

        const displayCompletionMessage = (message) => {
            elements.completionMessage.textContent = message;
            elements.completionMessage.style.display = 'block';
        };

        const getRandomText = () => {
            return texts[Math.floor(Math.random() * texts.length)];
        };

        elements.startButton.addEventListener('click', startPractice);
        elements.typingArea.addEventListener('input', updateTyping);
    });
    </script>
</body>
</html>